openapi: 3.0.0
info:
  title: FastAPI RAG Integration API
  description: API for integrating RAG system with frontend applications
  version: 1.0.0
paths:
  /chat:
    post:
      summary: Process a user query using the RAG system
      description: Accepts a user query and returns a response generated by the RAG system based on retrieved documents
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryRequest'
      responses:
        '200':
          description: Successful response from the RAG system
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QueryResponse'
        '400':
          description: Invalid request format
        '500':
          description: Internal server error
        '503':
          description: RAG backend unavailable
components:
  schemas:
    QueryRequest:
      type: object
      required:
        - query
      properties:
        query:
          type: string
          description: The user's question or query text
          example: "What are the key components of a humanoid robot's control system?"
        user_context:
          type: object
          description: Additional context about the user or session
          example: {"user_type": "student", "knowledge_level": "beginner"}
        session_id:
          type: string
          description: Identifier for the conversation session
          example: "session_12345"
        metadata:
          type: object
          description: Additional metadata for the query
          example: {"timestamp": "2025-12-27T10:00:00Z"}
    QueryResponse:
      type: object
      required:
        - response
        - grounded
        - query_id
        - confidence
        - timestamp
      properties:
        response:
          type: string
          description: The generated answer/response text
          example: "The key components of a humanoid robot's control system include..."
        source_chunks:
          type: array
          description: Array of source document chunks used to generate the response
          items:
            $ref: '#/components/schemas/SourceChunk'
        grounded:
          type: boolean
          description: Whether the response is grounded in retrieved context
          example: true
        query_id:
          type: string
          description: Identifier for the query session
          example: "thread_abc123"
        confidence:
          type: number
          format: float
          description: Confidence score for the response (0.0-1.0)
          example: 0.85
        timestamp:
          type: string
          format: date-time
          description: ISO timestamp of the response generation
          example: "2025-12-27T10:00:05Z"
    SourceChunk:
      type: object
      required:
        - id
        - content
        - relevance_score
        - source_document
      properties:
        id:
          type: string
          description: Unique identifier for the document chunk
          example: "chunk_1"
        content:
          type: string
          description: The content of the document chunk
          example: "The control system of a humanoid robot typically consists of multiple interconnected subsystems..."
        relevance_score:
          type: number
          format: float
          description: Relevance score for this chunk (0.0-1.0)
          example: 0.9
        source_document:
          type: string
          description: Reference to the source document
          example: "chapter_3_control_systems.pdf"